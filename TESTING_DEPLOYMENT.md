# Тестирование развертывания

Данный документ описывает процесс тестирования развернутого приложения.

## Предварительные требования

- Приложение успешно развернуто на GitHub Pages (фронтенд) и Render.com (бэкенд)
- Доступны URL-адреса как фронтенда, так и бэкенда

## Проверка бэкенда

### 1. Проверка доступности API

Откройте в браузере URL вашего бэкенда на Render.com и проверьте:

- [ ] Главная страница API доступна (обычно `/`)
- [ ] Документация API доступна (обычно `/docs` или `/redoc`)
- [ ] GraphQL-интерфейс доступен (обычно `/graphql`)

### 2. Тестирование основных эндпоинтов

Протестируйте следующие эндпоинты с помощью инструмента вроде curl, Postman или встроенного клиента API:

#### Проверка состояния системы
```
GET /health
```
Ожидаемый результат: код 200 с информацией о здоровье системы

#### Тестовый эндпоинт
```
GET /
```
Ожидаемый результат: код 200 с информацией о версии API

#### Проверка обработки запроса (если API-ключи настроены)
```
POST /agent/process
Content-Type: application/json

{
  "query": "Тестовый запрос",
  "user_id": "test_user",
  "session_id": "test_session"
}
```
Ожидаемый результат: код 200 с ответом агента

## Проверка фронтенда

### 1. Проверка доступности интерфейса

Откройте в браузере URL вашего фронтенда на GitHub Pages и проверьте:

- [ ] Страница загружается без ошибок
- [ ] Все элементы интерфейса отображаются корректно
- [ ] Нет ошибок в консоли браузера (F12 → Console)

### 2. Тестирование взаимодействия с бэкендом

#### Проверка подключения к API

1. Попробуйте выполнить тестовый запрос через интерфейс
2. Проверьте, что запрос корректно отправляется на бэкенд
3. Убедитесь, что ответ от бэкенда корректно отображается

#### Тестирование основных функций

- [ ] Форма ввода запроса работает
- [ ] Ответы от агента отображаются корректно
- [ ] Все интерактивные элементы функционируют

## Тестирование производительности

### 1. Время отклика

Измерьте время отклика для:

- [ ] Загрузки главной страницы фронтенда
- [ ] Отправки и получения ответа от бэкенда
- [ ] Загрузки дополнительных ресурсов (графики, визуализации)

### 2. Нагрузочное тестирование (опционально)

Для более глубокой проверки можно использовать инструменты:

- Apache Bench (ab)
- JMeter
- Postman Collection Runner

Пример команды для Apache Bench:
```
ab -n 100 -c 10 https://your-backend-url.onrender.com/health
```

## Тестирование безопасности

### 1. Проверка CORS

Убедитесь, что:
- [ ] Запросы с вашего домена GitHub Pages разрешены
- [ ] Запросы с посторонних доменов заблокированы

### 2. Проверка аутентификации

Если аутентификация настроена:
- [ ] Защищенные эндпоинты требуют аутентификации
- [ ] Без токенов доступ к защищенным ресурсам запрещен

## Тестирование отказоустойчивости

### 1. Проверка перезапуска сервисов

- [ ] Перезапустите бэкенд через панель управления Render
- [ ] Убедитесь, что сервис корректно перезапускается
- [ ] Проверьте, что фронтенд восстанавливает соединение

### 2. Проверка обработки ошибок

- [ ] Отправьте некорректный запрос в API
- [ ] Убедитесь, что возвращается адекватное сообщение об ошибке
- [ ] Проверьте, что интерфейс корректно обрабатывает ошибки

## Мониторинг и логирование

### 1. Проверка логов

- [ ] Проверьте логи бэкенда в панели Render
- [ ] Убедитесь, что все запросы логируются
- [ ] Найдите и проанализируйте потенциальные ошибки

### 2. Проверка метрик

Если настроены метрики:
- [ ] Проверьте доступность эндпоинтов метрик
- [ ] Убедитесь, что собираются основные метрики производительности

## Заключение

После выполнения всех тестов:

1. Зафиксируйте результаты тестирования
2. При необходимости внесите корректировки в конфигурацию
3. Повторите тестирование после изменений
4. Подготовьте отчет о результатах

Если все тесты пройдены успешно, приложение готово к использованию.